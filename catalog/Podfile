workspace 'MDCCatalog.xcworkspace'
xcodeproj 'MDCCatalog.xcodeproj'

target "MDCCatalog" do
  xcodeproj 'MDCCatalog.xcodeproj'
  pod 'MaterialComponentsCatalog', :path => '../'
  pod 'MaterialComponents', :path => '../'

  use_frameworks!
end

target "MDCUnitTests" do
  xcodeproj 'MDCUnitTests.xcodeproj'
  pod 'MaterialComponentsUnitTests', :path => '../'
  pod 'MaterialComponents', :path => '../'

  use_frameworks!
end

post_install do |installer|
  pod_dir = File.dirname(installer.pods_project.path)

  mdc_xcconfigs = [
    "#{pod_dir}/Target Support Files/MaterialComponents/MaterialComponents.xcconfig",
  ]

  mdc_xcconfigs.each do |mdc_xcconfig|
    new_xcconfig = File.read(mdc_xcconfig)
    new_xcconfig << "\n#include \"../MaterialComponentsWarnings.xcconfig\""
    File.write(mdc_xcconfig, new_xcconfig)
  end
end
